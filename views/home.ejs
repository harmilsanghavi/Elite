<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Twitter Clone - Final</title>
  <link rel="stylesheet" href="/style.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
    crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <input type="text" hidden name="id" id="id">
  <div class="whole-web">
    <div class="container">


      <div class="flexdata">


        <!-- sidebar starts -->
        <%-include("staticpart1")-%>
      </div>
      <!-- sidebar ends -->

      <!-- feed starts -->
      <div class="feed">

        <div class="home_tab2">
            <section>
              <div class="fixdata">
                <div class="fixdata-child">
                  <h2>Home</h2>
                </div>
              </div>

                <div class="container">
                    <%
                        const array_of_allowed_files = ['png', 'jpeg', 'jpg'];
                        const array_of_allowed_videos = ['mp4','gif'];
                    %>
                    <% for(var i=0;i<data.length;i++) { %>
                      
                            <div class="tweet">
                                    <div class="test_col_row">
                                        <div class="text_col1">
                                            <div class="img1"><img src="/files/profile-img.png"></div>
                                        </div>
                                        <div class="text_col2">
                                            <a href="">Jaquon Hart</a>
                                            <p class="skill"><%=data[i].description%></p>
                                            <%  const file_extension = data[i].media_url.slice(((data[i].media_url.lastIndexOf('.') - 1) >>> 0) + 2);
                                                if (array_of_allowed_files.includes(file_extension)) {
                                            %>
                                            <img id="tweet_img" src="<%=data[i].media_url%>" />
                                            <% }else{ %>
                                                <video width="320" height="240" controls>
                                                    <source src="<%=data[i].media_url%>" type="video/mp4">
                                                </video>
                                            <% }%>
                                            <div class="icon">
                                                <div class="insta">
                                                    <div class="icon_row">
                                                        <a href=""><i class="fa fa-thumbs-up"></i></a>
                                                        <p>10</p>
                                                      <div class="icon_row">
                                                        <div class="icon_col">
                                                            <a href=""><i class="fas fa-comment"></i></a>
                                                            <p>10</p>
                                                        </div>
                                                        <div>
                                                          
                                                        </div>
                                                      <div class="icon_row">
                                                        <div class="icon_col">
                                                            <a href=""><i class="fa fa-retweet"></i></a>
                                                      <p>10</p>
                                                        </div>
                                                       
                                                    </div>
                                                   
                                                 </div>
                                            </div>
                                        </div>
                                    </div>
                      
                            </div>
                        </div>
                        </div>
                        
                   <% } %>
                
                </div>
            </section>
            </div>
       

       
      </div>


      <!-- feed ends -->

      <!-- widgets starts -->
      <div class="widgets">
  <%-include("staticpart2")-%>
      </div>
    </div>
  </div>
  <!-- widgets ends -->
 
  <dialog id="moreoption">
    <div class="manubar">
      <a class="achange" href="http://localhost:8000/changepassword"> Change Password</a>
      <a class="achange" id="deleteac" onclick="deleteac()">Delete Account</a>
      <a class="achange" id="logoutac" onclick="logoutac()">Logout</a>

      <p class="cancel" onclick="dataout()">cancle</p>
    </div>
  </dialog>
  <script>

    function dataopt() {

      var data1 = document.getElementById('moreoption')
      data1.showModal()
    }
    function dataout() {
      var data1 = document.getElementById('moreoption')
      data1.close()
    }








    window.onscroll = function () { myFunction() };

    var header = document.getElementById("myHeader");


    var sticky = header.offsetTop;

    function myFunction() {
      if (window.pageYOffset > sticky) {
        header.classList.add("sticky");
      } else {
        header.classList.remove("sticky");
      }
    }








    async function del(abc) {
      x = parseInt(abc)
      console.log(x)

      var text = "you really want to delte this record" + x;
      if (confirm(text) == true) {
        text = "you really want to delte this record", x;
        fetch('/delete?id=' + x, {
          method: 'post',
          headers: {
            "Content-type": 'application/json'
          },
          body: JSON.stringify({
            id: x
          })
        })

          .then(res => res.json())
          .then(data => {
            document.getElementById(x).style.display = 'none';
            //console.log(data.result.length);
            console.log(data)
            console.log("data delete sucesfully!!!!")
            location.reload()
          })
      }
    }


    // var likeobj = 0;
    var count = 0
    var flag = true
    function likepost() {
      var z = document.getElementById('heart1')
      count = 1

      if (flag == true) {
        z.style.color = 'red'
        flag = false;
      } else {
        z.style.color = '#e0e2e4'
        flag = true;
      }
    }














    function dataopt() {

var data1 = document.getElementById('moreoption')
data1.showModal()
}
function dataout() {
var data1 = document.getElementById('moreoption')
data1.close()
}








window.onscroll = function () { myFunction() };

var header = document.getElementById("myHeader");


var sticky = header.offsetTop;

function myFunction() {
if (window.pageYOffset > sticky) {
  header.classList.add("sticky");
} else {
  header.classList.remove("sticky");
}
}


function logoutac() {


if (confirm("are your sure to logout") == true) {
      fetch(`/logout/logout`)
      location.assign(`/login/login/index5`)
      console.log("delete")
} else {
      alert("you cancel the delete");
}

}


async function deleteac() {

if (confirm("are your sure to Delete Account") == true) {
 const data=   await  fetch(`/deleteAccount/delete`);
 const data2 = await data.json();
 console.log(data2);
      window.location.href="/login/login/index5"
      console.log(data2);
} else {
      alert("you cancel the delete");
}

}


// var likeobj = 0;
var count=0
var flag=true
function likepost() {
  var z=document.getElementById('heart1')
  count=1
  
  if(flag==true){
      z.style.color='red'
    flag=false;
  }else{
    z.style.color='#e0e2e4'
    flag=true;
  }
}


  </script>
</body>

</html>